<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Productive Playhouse</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #5BA9AC 0%, #11484D 100%);
            padding: 20px;
            color: #333;
            min-height: 100vh;
        }

        .dashboard { max-width: 1800px; margin: 0 auto; }

        /* Header */
        .header {
            background: white;
            padding: 20px 32px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .header h1 { font-size: 28px; color: #1a202c; font-weight: 700; }
        .header .subtitle { font-size: 14px; color: #4a5568; margin-top: 4px; font-weight: 500; }
        .header-actions { display: flex; gap: 12px; align-items: center; }

        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-primary { background: #5BA9AC; color: white; }
        .btn-primary:hover:not(:disabled) { background: #11484D; transform: translateY(-1px); }
        .btn-secondary { background: #f7fafc; color: #4a5568; border: 1px solid #e2e8f0; }
        .btn-secondary:hover:not(:disabled) { background: #edf2f7; }
        .btn-success { background: #48bb78; color: white; }
        .btn-danger { background: #f56565; color: white; }
        .btn-warning { background: #ed8936; color: white; }

        .icon-btn {
            width: 40px;
            height: 40px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            cursor: pointer;
            font-size: 18px;
            position: relative;
        }

        .icon-btn:hover { background: #edf2f7; }
        .badge-dot {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 8px;
            height: 8px;
            background: #f56565;
            border-radius: 50%;
            border: 2px solid white;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 12px;
            border-radius: 8px;
            background: #f7fafc;
            cursor: pointer;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #5BA9AC 0%, #11484D 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 14px;
            letter-spacing: 0.5px;
        }

        .live-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: #f0fff4;
            border-radius: 6px;
        }

        .live-indicator {
            width: 8px;
            height: 8px;
            background: #48bb78;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        /* Alert */
        .alert {
            padding: 16px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .alert.warning {
            background: #fffaf0;
            color: #7c2d12;
            border-left: 4px solid #f59e0b;
            box-shadow: 0 2px 4px rgba(245, 158, 11, 0.1);
        }
        .alert-content { flex: 1; }
        .alert-title { font-weight: 600; margin-bottom: 4px; }
        .alert-close { background: none; border: none; cursor: pointer; font-size: 20px; }

        /* Filter Bar */
        .filter-bar {
            background: white;
            padding: 16px 24px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            padding: 10px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
        }

        .search-box:focus {
            outline: none;
            border-color: #5BA9AC;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .filter-select {
            padding: 10px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        .applied-filters {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .filter-chip {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: #ebf8ff;
            border-radius: 12px;
            font-size: 12px;
            color: #2c5282;
        }

        .filter-chip button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            color: #2c5282;
        }

        /* Grids */
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 20px; }
        .grid-2 { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 20px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 20px; }

        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: all 0.2s;
        }

        .card.clickable { cursor: pointer; }
        .card.clickable:hover { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); transform: translateY(-2px); }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 16px;
        }

        .card-title {
            font-size: 14px;
            font-weight: 600;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .metric { font-size: 36px; font-weight: 700; color: #1a202c; line-height: 1; margin-bottom: 8px; }
        .metric-label { font-size: 14px; color: #718096; }
        .metric.success { color: #48bb78; }
        .metric.warning { color: #ed8936; }
        .metric.danger { color: #f56565; }
        .metric.info { color: #4299e1; }

        .trend {
            display: inline-flex;
            align-items: center;
            font-size: 13px;
            margin-top: 8px;
            padding: 4px 10px;
            border-radius: 6px;
            font-weight: 600;
        }

        .trend.up { color: #48bb78; background: #f0fff4; }
        .trend.down { color: #48bb78; background: #f0fff4; }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-right: 6px;
        }

        .badge.success { background: #f0fff4; color: #48bb78; }
        .badge.danger { background: #fff5f5; color: #f56565; }
        .badge.warning { background: #fffaf0; color: #ed8936; }
        .badge.info { background: #ebf8ff; color: #4299e1; }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 12px;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #5BA9AC 0%, #11484D 100%);
            transition: width 0.3s ease;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            animation: fadeIn 0.2s;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .modal {
            background: white;
            border-radius: 12px;
            padding: 32px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s;
        }

        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .modal-large { max-width: 900px; }
        .modal-danger { border-top: 4px solid #f56565; }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 24px;
        }

        .modal-title { font-size: 24px; font-weight: 700; color: #1a202c; }

        .modal-close {
            background: #f7fafc;
            border: none;
            font-size: 20px;
            color: #718096;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
        }

        .modal-close:hover { background: #edf2f7; color: #1a202c; }
        .modal-content { margin-bottom: 24px; }
        .modal-footer { display: flex; justify-content: flex-end; gap: 12px; }

        .warning-box {
            padding: 16px;
            background: #fff5f5;
            border: 1px solid #feb2b2;
            border-radius: 8px;
            color: #742a2a;
            margin-bottom: 20px;
        }

        .impact-summary, .consequences {
            margin-bottom: 20px;
        }

        .impact-summary h4, .consequences h4 {
            font-size: 14px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .impact-summary ul, .consequences ul {
            list-style: none;
            padding-left: 0;
        }

        .impact-summary li, .consequences li {
            padding: 6px 0;
            font-size: 14px;
            color: #4a5568;
        }

        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; font-size: 14px; font-weight: 600; color: #2d3748; margin-bottom: 8px; }
        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: #5BA9AC;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-textarea { min-height: 80px; resize: vertical; }

        .confirmation-input {
            margin-top: 20px;
            padding: 16px;
            background: #f7fafc;
            border-radius: 8px;
        }

        .confirmation-input label {
            display: block;
            font-size: 14px;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .confirmation-input code {
            background: #1a202c;
            color: #48bb78;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 700;
        }

        .confirmation-input input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            margin-top: 8px;
        }

        .confirmation-input input:focus {
            border-color: #5BA9AC;
            outline: none;
        }

        /* Loading State */
        .loading-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 80px 20px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #e2e8f0;
            border-top-color: #5BA9AC;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 16px;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        .loading-text { font-size: 18px; font-weight: 600; color: #2d3748; margin-bottom: 8px; }
        .loading-subtext { font-size: 14px; color: #718096; }

        /* Error State */
        .error-state {
            background: #fff5f5;
            border: 2px solid #feb2b2;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
        }

        .error-icon { font-size: 48px; margin-bottom: 16px; }
        .error-title { font-size: 20px; font-weight: 700; color: #742a2a; margin-bottom: 8px; }
        .error-message { font-size: 14px; color: #9b2c2c; margin-bottom: 24px; }
        .error-actions { display: flex; gap: 12px; justify-content: center; margin-bottom: 24px; }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
        }

        .empty-icon { font-size: 64px; margin-bottom: 16px; }
        .empty-title { font-size: 20px; font-weight: 600; color: #2d3748; margin-bottom: 8px; }
        .empty-message { font-size: 14px; color: #718096; margin-bottom: 24px; }
        .empty-actions { display: flex; gap: 12px; justify-content: center; }

        /* Keyboard Shortcut Hint */
        kbd {
            background: #1a202c;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 700;
            font-family: monospace;
        }

        .keyboard-hint {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(26, 32, 44, 0.95);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 12px;
            z-index: 999;
            animation: fadeIn 0.3s;
        }

        /* User Permission Badge */
        .permission-badge {
            display: inline-block;
            padding: 4px 12px;
            background: #faf5ff;
            color: #6b46c1;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            margin-left: 12px;
            letter-spacing: 0.5px;
        }

        /* Audit Trail */
        .audit-info {
            font-size: 11px;
            color: #a0aec0;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #e2e8f0;
        }

        /* Cost Badge */
        .cost-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            background: #fffaf0;
            color: #7c2d12;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 1400px) {
            .grid { grid-template-columns: repeat(2, 1fr); }
            .grid-3 { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 1024px) {
            .header h1 { font-size: 24px; }
            .header-actions { gap: 8px; }
            .btn { padding: 6px 12px; font-size: 13px; }
        }

        @media (max-width: 768px) {
            .grid, .grid-2, .grid-3 { grid-template-columns: 1fr; }
            .header-top { flex-direction: column; align-items: stretch; gap: 16px; }
            .header-actions { flex-wrap: wrap; justify-content: center; }
            .header h1 { font-size: 22px; text-align: center; }
            .header .subtitle { text-align: center; }
            .user-menu { flex-direction: column; text-align: center; gap: 8px; }
        }

        /* Status Grid */
        .status-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px;
            background: #f7fafc;
            border-radius: 8px;
            border-left: 3px solid transparent;
            cursor: pointer;
            transition: all 0.2s;
        }

        .status-item:hover { background: #edf2f7; transform: translateX(4px); }
        .status-item .label { font-size: 14px; color: #4a5568; font-weight: 500; }
        .status-item .value { font-size: 20px; font-weight: 700; }

        /* Execution Engine */
        .execution-status {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .execution-engine {
            padding: 16px;
            background: #f7fafc;
            border-radius: 8px;
            border-left: 4px solid #5BA9AC;
        }

        .engine-name { font-size: 12px; color: #718096; margin-bottom: 8px; font-weight: 600; }
        .engine-status { font-size: 18px; font-weight: 700; color: #1a202c; margin-bottom: 4px; }
        .engine-throughput { font-size: 12px; color: #48bb78; font-weight: 600; }

        .control-panel { display: flex; gap: 8px; margin-top: 16px; }
        .control-panel .btn { flex: 1; justify-content: center; }

        /* Language Grid */
        .language-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .language-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px;
            background: #f7fafc;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .language-item:hover { background: #edf2f7; }
        .lang-name { font-size: 14px; font-weight: 600; color: #2d3748; margin-bottom: 6px; }
        .lang-stats { font-size: 12px; color: #718096; }
        .lang-pass-rate { font-size: 16px; font-weight: 700; }

        /* Defect List */
        .defect-list { margin-top: 16px; max-height: 400px; overflow-y: auto; }

        .defect-item {
            padding: 16px;
            border-left: 4px solid;
            background: #f7fafc;
            margin-bottom: 10px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .defect-item:hover { background: #edf2f7; transform: translateX(4px); }
        .defect-item.critical { border-left-color: #f56565; }
        .defect-item.high { border-left-color: #ed8936; }

        .defect-title { font-size: 14px; font-weight: 600; color: #2d3748; margin-bottom: 4px; }
        .defect-meta { font-size: 12px; color: #718096; margin-bottom: 8px; }

        /* Validation Accuracy */
        .accuracy-showcase {
            text-align: center;
            padding: 32px;
            background: linear-gradient(135deg, #5BA9AC 0%, #11484D 100%);
            border-radius: 12px;
            color: white;
        }

        .accuracy-showcase .big-number { font-size: 72px; font-weight: 700; line-height: 1; margin-bottom: 8px; }
        .accuracy-showcase .label { font-size: 18px; opacity: 0.9; }
        .accuracy-showcase .sub-label { font-size: 14px; opacity: 0.8; margin-top: 8px; }

        /* CI/CD Pipeline */
        .ci-pipeline {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 20px;
        }

        .pipeline-stage {
            flex: 1;
            padding: 14px;
            text-align: center;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .pipeline-stage:hover { transform: translateY(-2px); }
        .pipeline-stage.success { background: #f0fff4; color: #48bb78; }
        .pipeline-stage.running { background: #ebf8ff; color: #4299e1; animation: pulse 2s infinite; }
        .pipeline-stage.pending { background: #f7fafc; color: #a0aec0; }
        .pipeline-stage.failed { background: #fff5f5; color: #f56565; }

        .pipeline-arrow { color: #cbd5e0; font-size: 20px; }

        /* Queue Card */
        .queue-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .queue-card {
            padding: 16px;
            border-radius: 8px;
            border-left: 4px solid;
            cursor: pointer;
            transition: all 0.2s;
        }

        .queue-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .queue-count { font-size: 32px; font-weight: 700; margin-bottom: 8px; }

        /* Wizard Steps */
        .wizard-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 32px;
            padding-bottom: 16px;
            border-bottom: 2px solid #e2e8f0;
        }

        .wizard-step {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #e2e8f0;
            color: #718096;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        .wizard-step.active .step-number { background: #5BA9AC; color: white; }
        .wizard-step.complete .step-number { background: #48bb78; color: white; }
        .step-label { font-size: 14px; font-weight: 600; color: #718096; }
        .wizard-step.active .step-label { color: #5BA9AC; }

        .step-connector {
            flex: 1;
            height: 2px;
            background: #e2e8f0;
            margin: 0 8px;
        }

        .wizard-step.complete ~ .step-connector { background: #48bb78; }

        /* Navigation */
        .main-nav {
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            border-radius: 16px;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
        }

        .nav-brand {
            font-size: 18px;
            font-weight: 700;
            background: linear-gradient(135deg, #5BA9AC 0%, #11484D 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            padding: 16px 0;
            margin-right: 32px;
        }

        .nav-links {
            display: flex;
            gap: 8px;
        }

        .nav-link {
            padding: 8px 16px;
            text-decoration: none;
            color: #4a5568;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            border-bottom: 2px solid transparent;
        }

        .nav-link:hover {
            background: #f7fafc;
            color: #5BA9AC;
        }

        .nav-link.active {
            color: #5BA9AC;
            border-bottom-color: #5BA9AC;
        }

        @media (max-width: 768px) {
            .nav-links {
                flex-wrap: wrap;
                width: 100%;
                overflow-x: auto;
            }

            .nav-link {
                padding: 12px 16px;
                white-space: nowrap;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // ===== DATA MODEL (FIXED - ALL MATH CONSISTENT) =====
        const TOTAL_TEST_CASES = 2847;
        const LANGUAGE_DATA = [
            {code: 'en-US', flag: 'US', name: 'English (US)', tests: 1281, passRate: 98.9},
            {code: 'es-ES', flag: 'ES', name: 'Spanish', tests: 854, passRate: 99.2},
            {code: 'zh-CN', flag: 'CN', name: 'Mandarin', tests: 427, passRate: 97.8},
            {code: 'de-DE', flag: 'DE', name: 'German', tests: 285, passRate: 96.5}, // Adjusted for defect
            {code: 'fr-FR', flag: 'FR', name: 'French', tests: 198, passRate: 98.5},
            {code: 'ja-JP', flag: 'JP', name: 'Japanese', tests: 156, passRate: 97.3},
            {code: 'ko-KR', flag: 'KR', name: 'Korean', tests: 124, passRate: 98.7},
            {code: 'it-IT', flag: 'IT', name: 'Italian', tests: 98, passRate: 99.4}
        ];

        // Some tests span multiple languages (total individual executions)
        const TOTAL_LANGUAGE_EXECUTIONS = LANGUAGE_DATA.reduce((sum, l) => sum + l.tests, 0); // 3,423

        // Today's execution stats
        const TESTS_EXECUTED_TODAY = '1,280';
        const TESTS_PER_HOUR = 156; // More realistic
        const CURRENT_EXECUTION = {
            total: 1117,  // 820 + 37 + 48 + 212 = 1117
            completed: 905,  // 820 + 37 + 48 = 905
            failed: 37,
            underReview: 48,
            queued: 212
        };

        const Dashboard = () => {
            const [currentTime, setCurrentTime] = useState(new Date());
            const [dataState, setDataState] = useState('success'); // loading, error, success
            const [filters, setFilters] = useState({
                timeRange: '24h',
                language: 'all',
                environment: 'all'
            });
            const [appliedFilters, setAppliedFilters] = useState([]);
            const [showStopModal, setShowStopModal] = useState(false);
            const [showRunTestModal, setShowRunTestModal] = useState(false);
            const [showDefectModal, setShowDefectModal] = useState(false);
            const [selectedDefect, setSelectedDefect] = useState(null);
            const [executionPaused, setExecutionPaused] = useState(false);
            const [showAlert, setShowAlert] = useState(true);
            const [showKeyboardHelp, setShowKeyboardHelp] = useState(false);
            const [userRole, setUserRole] = useState('admin'); // admin, engineer, viewer

            // Keyboard shortcuts
            useEffect(() => {
                const handleKeyPress = (e) => {
                    // Global shortcuts
                    if (e.key === '/' && !e.ctrlKey && !e.metaKey) {
                        e.preventDefault();
                        document.querySelector('.search-box')?.focus();
                    }
                    if (e.key === '?' && e.shiftKey) {
                        e.preventDefault();
                        setShowKeyboardHelp(true);
                    }
                    if (e.key === 'Escape') {
                        setShowStopModal(false);
                        setShowRunTestModal(false);
                        setShowDefectModal(false);
                        setShowKeyboardHelp(false);
                    }
                    if ((e.ctrlKey || e.metaKey) && e.key === 'r') {
                        e.preventDefault();
                        refreshData();
                    }
                };

                document.addEventListener('keydown', handleKeyPress);
                return () => document.removeEventListener('keydown', handleKeyPress);
            }, []);

            // Update time
            useEffect(() => {
                const timer = setInterval(() => setCurrentTime(new Date()), 1000);
                return () => clearInterval(timer);
            }, []);

            // Apply filter changes
            const applyFilters = () => {
                const applied = [];
                if (filters.timeRange !== '24h') applied.push({key: 'timeRange', label: filters.timeRange, value: filters.timeRange});
                if (filters.language !== 'all') applied.push({key: 'language', label: filters.language, value: filters.language});
                if (filters.environment !== 'all') applied.push({key: 'environment', label: filters.environment, value: filters.environment});
                setAppliedFilters(applied);
            };

            const removeFilter = (key) => {
                setFilters({...filters, [key]: key === 'timeRange' ? '24h' : 'all'});
            };

            const refreshData = () => {
                setDataState('loading');
                setTimeout(() => setDataState('success'), 1000);
            };

            const formatTime = (date) => {
                return date.toLocaleString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
            };

            const completionPercentage = ((CURRENT_EXECUTION.completed / CURRENT_EXECUTION.total) * 100).toFixed(1);
            const remainingTests = CURRENT_EXECUTION.total - CURRENT_EXECUTION.completed;
            const estimatedMinutesRemaining = Math.ceil((remainingTests / TESTS_PER_HOUR) * 60);

            if (dataState === 'loading') {
                return (
                    <div className="dashboard">
                        <div className="card">
                            <div className="loading-state">
                                <div className="spinner"></div>
                                <div className="loading-text">Loading Dashboard...</div>
                                <div className="loading-subtext">Fetching latest test data</div>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="dashboard">
                    {/* Navigation */}
                    <nav className="main-nav">
                        <div className="nav-container">
                            <div className="nav-brand">Productive Playhouse</div>
                            <div className="nav-links">
                                <a href="dashboard.html" className="nav-link active"><i data-lucide="layout-dashboard" style={{width: '16px', height: '16px', marginRight: '6px'}}></i>Dashboard</a>
                                <a href="test-management.html" className="nav-link"><i data-lucide="flask-conical" style={{width: '16px', height: '16px', marginRight: '6px'}}></i>Test Management</a>
                                <a href="analytics.html" className="nav-link"><i data-lucide="trending-up" style={{width: '16px', height: '16px', marginRight: '6px'}}></i>Analytics</a>
                                <a href="validation.html" className="nav-link"><i data-lucide="check-circle" style={{width: '16px', height: '16px', marginRight: '6px'}}></i>Validation</a>
                                <a href="reports.html" className="nav-link"><i data-lucide="file-text" style={{width: '16px', height: '16px', marginRight: '6px'}}></i>Reports</a>
                            </div>
                        </div>
                    </nav>

                    {/* Keyboard Shortcuts Helper */}
                    {!showKeyboardHelp && (
                        <div className="keyboard-hint">
                            Press <kbd>?</kbd> for keyboard shortcuts
                        </div>
                    )}

                    {/* Alert */}
                    {showAlert && (
                        <div className="alert warning">
                            <div style={{fontSize: '20px'}}><i data-lucide="alert-triangle" style={{width: '20px', height: '20px'}}></i></div>
                            <div className="alert-content">
                                <div className="alert-title">3 Critical Defects Detected</div>
                                <div>Voice command timeout affecting German locale. <a href="#defects" style={{color: 'inherit', fontWeight: '600'}}>View details →</a></div>
                            </div>
                            <button className="alert-close" onClick={() => setShowAlert(false)}>×</button>
                        </div>
                    )}

                    {/* Header */}
                    <div className="header">
                        <div className="header-top">
                            <div>
                                <h1>Dashboard
                                    <span className="permission-badge">{userRole.toUpperCase()}</span>
                                </h1>
                                <div className="subtitle">Productive Playhouse × SoundHound Integration</div>
                            </div>
                            <div className="header-actions">
                                <button
                                    className="btn btn-primary"
                                    onClick={() => setShowRunTestModal(true)}
                                    disabled={userRole === 'viewer'}
                                >
                                    <i data-lucide="play" style={{width: '14px', height: '14px'}}></i> Run New Test
                                </button>
                                <button className="btn btn-secondary">
                                    <i data-lucide="file-text" style={{width: '14px', height: '14px'}}></i> Generate Report
                                </button>
                                <button className="icon-btn">
                                    <i data-lucide="bell" style={{width: '18px', height: '18px'}}></i>
                                    <span className="badge-dot"></span>
                                </button>
                                <button className="icon-btn"><i data-lucide="settings" style={{width: '18px', height: '18px'}}></i></button>
                                <div className="user-menu">
                                    <div className="user-avatar">JD</div>
                                    <div>
                                        <div style={{fontSize: '14px', fontWeight: '600'}}>John Doe</div>
                                        <div style={{fontSize: '12px', color: '#718096'}}>{userRole}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Filter Bar */}
                    <div className="filter-bar">
                        <input
                            type="text"
                            className="search-box"
                            placeholder="Search tests, defects, metrics... (Press / to focus)"
                            style={{paddingLeft: '36px', backgroundImage: 'none'}}
                        />
                        <select
                            className="filter-select"
                            value={filters.timeRange}
                            onChange={(e) => setFilters({...filters, timeRange: e.target.value})}
                        >
                            <option value="24h">Last 24 Hours</option>
                            <option value="7d">Last 7 Days</option>
                            <option value="30d">Last 30 Days</option>
                            <option value="custom">Custom Range...</option>
                        </select>
                        <select
                            className="filter-select"
                            value={filters.language}
                            onChange={(e) => setFilters({...filters, language: e.target.value})}
                        >
                            <option value="all">All Languages</option>
                            {LANGUAGE_DATA.map(l => (
                                <option key={l.code} value={l.code}>{l.flag} {l.name}</option>
                            ))}
                        </select>
                        <select
                            className="filter-select"
                            value={filters.environment}
                            onChange={(e) => setFilters({...filters, environment: e.target.value})}
                        >
                            <option value="all">All Environments</option>
                            <option value="production">Production</option>
                            <option value="staging">Staging</option>
                            <option value="development">Development</option>
                        </select>
                        <button className="btn btn-secondary" onClick={applyFilters}>
                            Apply Filters
                        </button>
                        <button className="btn btn-secondary" onClick={refreshData}>
                            <i data-lucide="refresh-cw" style={{width: '14px', height: '14px'}}></i> Refresh
                        </button>

                        {appliedFilters.length > 0 && (
                            <div className="applied-filters">
                                {appliedFilters.map(filter => (
                                    <div key={filter.key} className="filter-chip">
                                        {filter.label}
                                        <button onClick={() => removeFilter(filter.key)}>×</button>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>

                    {/* KPIs */}
                    <div className="grid">
                        <div className="card clickable">
                            <div className="card-header">
                                <div className="card-title">Tests Executed Today</div>
                            </div>
                            <div className="metric info">{TESTS_EXECUTED_TODAY}</div>
                            <div className="metric-label">{TESTS_PER_HOUR} tests/hour avg</div>
                            <span className="trend up"><i data-lucide="trending-up" style={{width: '12px', height: '12px'}}></i> 18% vs yesterday</span>
                            <div className="cost-badge" style={{marginTop: '8px'}}>
                                <i data-lucide="dollar-sign" style={{width: '12px', height: '12px'}}></i> $47.20 cost today
                            </div>
                        </div>

                        <div className="card clickable">
                            <div className="metric success">98.5%</div>
                            <div className="metric-label">System Health</div>
                            <div className="progress-bar">
                                <div className="progress-fill" style={{width: '98.5%'}}></div>
                            </div>
                        </div>

                        <div className="card clickable">
                            <div className="metric warning">23</div>
                            <div className="metric-label">
                                <span className="badge danger">3 Critical</span>
                                <span className="badge warning">8 High</span>
                                <span className="badge info">12 Medium</span>
                            </div>
                        </div>

                        <div className="card clickable">
                            <div className="metric">1.18s</div>
                            <div className="metric-label">Avg Response Time</div>
                            <div style={{fontSize: '12px', color: '#718096', marginTop: '4px'}}><i data-lucide="check" style={{width: '12px', height: '12px', marginRight: '4px'}}></i>Within SLA (2.0s)</div>
                            <span className="trend down">↓ 0.3s improvement</span>
                        </div>
                    </div>

                    {/* Execution Status */}
                    <div className="grid-2">
                        <div className="card">
                            <div className="card-header">
                                <div className="card-title">Real-Time Test Execution</div>
                                <div className="cost-badge"><i data-lucide="dollar-sign" style={{width: '12px', height: '12px', marginRight: '4px'}}></i>$12.40 running cost</div>
                            </div>

                            <div style={{display: 'flex', justifyContent: 'space-between', marginBottom: '16px'}}>
                                <div>
                                    <div className="metric info">
                                        {CURRENT_EXECUTION.completed} / {CURRENT_EXECUTION.total}
                                    </div>
                                    <div className="metric-label">Tests Completed ({completionPercentage}%)</div>
                                </div>
                                <div style={{textAlign: 'right'}}>
                                    <div style={{fontSize: '20px', fontWeight: '700', color: '#48bb78'}}>
                                        {estimatedMinutesRemaining}m
                                    </div>
                                    <div className="metric-label">Est. remaining</div>
                                </div>
                            </div>

                            <div className="progress-bar" style={{height: '12px'}}>
                                <div className="progress-fill" style={{width: `${completionPercentage}%`}}></div>
                            </div>

                            <div className="control-panel">
                                <button
                                    className="btn btn-secondary"
                                    onClick={() => setExecutionPaused(!executionPaused)}
                                    disabled={userRole === 'viewer'}
                                >
                                    {executionPaused ? <><i data-lucide="play" style={{width: '14px', height: '14px'}}></i> Resume</> : <><i data-lucide="pause" style={{width: '14px', height: '14px'}}></i> Pause</>}
                                </button>
                                <button
                                    className="btn btn-danger"
                                    onClick={() => setShowStopModal(true)}
                                    disabled={userRole === 'viewer'}
                                >
                                    <i data-lucide="square" style={{width: '14px', height: '14px'}}></i> Stop
                                </button>
                                <button className="btn btn-secondary"><i data-lucide="skip-forward" style={{width: '14px', height: '14px'}}></i> Skip Failed</button>
                                <button className="btn btn-secondary"><i data-lucide="rotate-cw" style={{width: '14px', height: '14px'}}></i> Retry ({CURRENT_EXECUTION.failed})</button>
                            </div>

                            <div className="execution-status">
                                <div className="execution-engine">
                                    <div className="engine-name">Voice Interaction</div>
                                    <div className="engine-status">Running</div>
                                    <div className="engine-throughput">78 tests/hr</div>
                                </div>
                                <div className="execution-engine">
                                    <div className="engine-name">Device Control</div>
                                    <div className="engine-status">Running</div>
                                    <div className="engine-throughput">45 tests/hr</div>
                                </div>
                                <div className="execution-engine">
                                    <div className="engine-name">Validation</div>
                                    <div className="engine-status">Running</div>
                                    <div className="engine-throughput">33 tests/hr</div>
                                </div>
                            </div>

                            <div className="status-grid">
                                <div className="status-item" style={{borderLeftColor: '#48bb78'}}>
                                    <span className="label"><i data-lucide="check" style={{width: '14px', height: '14px', marginRight: '4px'}}></i> Passed</span>
                                    <span className="value" style={{color: '#48bb78'}}>{CURRENT_EXECUTION.completed - CURRENT_EXECUTION.failed - CURRENT_EXECUTION.underReview}</span>
                                </div>
                                <div className="status-item" style={{borderLeftColor: '#f56565'}}>
                                    <span className="label"><i data-lucide="x" style={{width: '14px', height: '14px', marginRight: '4px'}}></i> Failed</span>
                                    <span className="value" style={{color: '#f56565'}}>{CURRENT_EXECUTION.failed}</span>
                                </div>
                                <div className="status-item" style={{borderLeftColor: '#ed8936'}}>
                                    <span className="label"><i data-lucide="eye" style={{width: '14px', height: '14px', marginRight: '4px'}}></i> Review</span>
                                    <span className="value" style={{color: '#ed8936'}}>{CURRENT_EXECUTION.underReview}</span>
                                </div>
                                <div className="status-item" style={{borderLeftColor: '#4299e1'}}>
                                    <span className="label"><i data-lucide="clock" style={{width: '14px', height: '14px', marginRight: '4px'}}></i> Queued</span>
                                    <span className="value" style={{color: '#4299e1'}}>{CURRENT_EXECUTION.queued}</span>
                                </div>
                            </div>

                            <div className="audit-info">
                                Run ID: TR-2847 • Started: 2:33 PM • By: Sarah Chen • Trigger: Manual
                            </div>
                        </div>

                        <div className="card">
                            <div className="card-header">
                                <div className="card-title">AI Validation Accuracy</div>
                            </div>
                            <div className="accuracy-showcase">
                                <div className="big-number">99.7%</div>
                                <div className="label">Human Agreement Rate</div>
                                <div className="sub-label">Last 30 Days • 8,947 Validations</div>
                            </div>
                            <div className="status-grid" style={{marginTop: '20px'}}>
                                <div className="status-item">
                                    <span className="label">Total Validations</span>
                                    <span className="value">8,947</span>
                                </div>
                                <div className="status-item">
                                    <span className="label">Human Reviews</span>
                                    <span className="value">342</span>
                                </div>
                                <div className="status-item">
                                    <span className="label">Agreement</span>
                                    <span className="value" style={{color: '#48bb78'}}>99.7%</span>
                                </div>
                                <div className="status-item">
                                    <span className="label">Time Saved</span>
                                    <span className="value">847h</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Language Coverage */}
                    <div className="grid-2">
                        <div className="card">
                            <div className="card-header">
                                <div className="card-title">Multi-Language Coverage</div>
                            </div>
                            <div className="metric">8 Languages</div>
                            <div className="metric-label">{TOTAL_TEST_CASES} test cases • {TOTAL_LANGUAGE_EXECUTIONS} language executions</div>

                            <div className="language-grid">
                                {LANGUAGE_DATA.map((lang, idx) => (
                                    <div key={idx} className="language-item">
                                        <div>
                                            <div className="lang-name">
                                                <span style={{display: 'inline-block', padding: '2px 6px', background: '#edf2f7', borderRadius: '4px', fontSize: '10px', fontWeight: '700', marginRight: '8px'}}>{lang.flag}</span>
                                                {lang.name}
                                            </div>
                                            <div className="lang-stats">{lang.tests} executions</div>
                                        </div>
                                        <div className="lang-pass-rate" style={{color: lang.passRate < 98 ? '#ed8936' : '#48bb78'}}>
                                            {lang.passRate}%
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="card">
                            <div className="card-header">
                                <div className="card-title">Critical Defects</div>
                                <button
                                    className="btn btn-primary"
                                    style={{padding: '6px 12px', fontSize: '12px'}}
                                    disabled={userRole === 'viewer'}
                                >
                                    + Create Issue
                                </button>
                            </div>

                            <div className="defect-list">
                                {[
                                    {id: 'DEF-001', severity: 'critical', title: 'Voice timeout in German (DE-DE)', meta: '2h ago • 47 tests affected', assignee: null},
                                    {id: 'DEF-002', severity: 'critical', title: 'Semantic mismatch: nav vs music', meta: '4h ago • 23 tests affected', assignee: 'Sarah Chen'},
                                    {id: 'DEF-003', severity: 'critical', title: 'Context loss after 3+ turns', meta: '5h ago • 18 tests affected', assignee: null}
                                ].map((defect) => (
                                    <div
                                        key={defect.id}
                                        className={`defect-item ${defect.severity}`}
                                        onClick={() => {
                                            setSelectedDefect(defect);
                                            setShowDefectModal(true);
                                        }}
                                    >
                                        <div>
                                            <div className="defect-title">{defect.title}</div>
                                            <div className="defect-meta">
                                                {defect.id} • {defect.meta}
                                            </div>
                                            <div className="defect-meta">
                                                Assignee: {defect.assignee || 'Unassigned'}
                                            </div>
                                        </div>
                                        <span className="badge danger">CRITICAL</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Stop Execution Modal */}
                    {showStopModal && (
                        <StopExecutionModal
                            onClose={() => setShowStopModal(false)}
                            executionData={CURRENT_EXECUTION}
                        />
                    )}

                    {/* Run New Test Modal */}
                    {showRunTestModal && (
                        <RunNewTestModal onClose={() => setShowRunTestModal(false)} />
                    )}

                    {/* Defect Detail Modal */}
                    {showDefectModal && selectedDefect && (
                        <DefectDetailModal
                            defect={selectedDefect}
                            onClose={() => {
                                setShowDefectModal(false);
                                setSelectedDefect(null);
                            }}
                            userRole={userRole}
                        />
                    )}

                    {/* Keyboard Help Modal */}
                    {showKeyboardHelp && (
                        <KeyboardHelpModal onClose={() => setShowKeyboardHelp(false)} />
                    )}
                </div>
            );
        };

        // ===== MODALS =====

        const StopExecutionModal = ({onClose, executionData}) => {
            const [confirmText, setConfirmText] = useState('');
            const [reason, setReason] = useState('');

            const handleStop = () => {
                if (confirmText === 'STOP' && reason.trim()) {
                    console.log('Stopping execution:', {reason, timestamp: new Date()});
                    onClose();
                }
            };

            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal modal-danger" onClick={(e) => e.stopPropagation()}>
                        <div className="modal-header">
                            <div className="modal-title"><i data-lucide="alert-triangle" style={{width: '20px', height: '20px', marginRight: '8px'}}></i> Stop Test Execution?</div>
                            <button className="modal-close" onClick={onClose}>×</button>
                        </div>
                        <div className="modal-content">
                            <div className="warning-box">
                                <strong>This will immediately halt all running tests.</strong>
                            </div>

                            <div className="impact-summary">
                                <h4>Current Progress:</h4>
                                <ul>
                                    <li><i data-lucide="check-circle" style={{width: '14px', height: '14px', marginRight: '6px'}}></i> Completed: {executionData.completed} tests</li>
                                    <li><i data-lucide="settings" style={{width: '14px', height: '14px', marginRight: '6px'}}></i> Running: ~12 tests (will be stopped)</li>
                                    <li><i data-lucide="clock" style={{width: '14px', height: '14px', marginRight: '6px'}}></i> Queued: {executionData.queued} tests (will be cancelled)</li>
                                </ul>
                            </div>

                            <div className="consequences">
                                <h4>Consequences:</h4>
                                <ul>
                                    <li>Partial results may be inconsistent</li>
                                    <li>Running tests marked as "Aborted"</li>
                                    <li>Queued tests will not execute</li>
                                    <li>Can resume manually later</li>
                                </ul>
                            </div>

                            <div className="form-group">
                                <label>Reason for stopping (required):</label>
                                <textarea
                                    className="form-textarea"
                                    placeholder="e.g., Critical bug found, emergency deployment, etc."
                                    value={reason}
                                    onChange={(e) => setReason(e.target.value)}
                                    required
                                />
                            </div>

                            <div className="confirmation-input">
                                <label>Type <code>STOP</code> to confirm:</label>
                                <input
                                    type="text"
                                    placeholder="Type STOP"
                                    value={confirmText}
                                    onChange={(e) => setConfirmText(e.target.value)}
                                    autoFocus
                                />
                            </div>
                        </div>
                        <div className="modal-footer">
                            <button className="btn btn-secondary" onClick={onClose}>Cancel</button>
                            <button
                                className="btn btn-danger"
                                disabled={confirmText !== 'STOP' || !reason.trim()}
                                onClick={handleStop}
                            >
                                Stop Execution
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const RunNewTestModal = ({onClose}) => {
            const [step, setStep] = useState(1);
            const [config, setConfig] = useState({
                suite: 'smoke',
                environment: 'staging',
                parallelism: 3,
                notifyEmail: true,
                notifySlack: true
            });

            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal modal-large" onClick={(e) => e.stopPropagation()}>
                        <div className="modal-header">
                            <div className="modal-title">Run New Test - Step {step} of 3</div>
                            <button className="modal-close" onClick={onClose}>×</button>
                        </div>

                        <div className="wizard-steps">
                            <div className={`wizard-step ${step >= 1 ? 'active' : ''} ${step > 1 ? 'complete' : ''}`}>
                                <div className="step-number">{step > 1 ? <i data-lucide="check" style={{width: '14px', height: '14px'}}></i> : '1'}</div>
                                <div className="step-label">Select Tests</div>
                            </div>
                            <div className="step-connector"></div>
                            <div className={`wizard-step ${step >= 2 ? 'active' : ''} ${step > 2 ? 'complete' : ''}`}>
                                <div className="step-number">{step > 2 ? <i data-lucide="check" style={{width: '14px', height: '14px'}}></i> : '2'}</div>
                                <div className="step-label">Configure</div>
                            </div>
                            <div className="step-connector"></div>
                            <div className={`wizard-step ${step >= 3 ? 'active' : ''}`}>
                                <div className="step-number">3</div>
                                <div className="step-label">Confirm</div>
                            </div>
                        </div>

                        <div className="modal-content">
                            {step === 1 && (
                                <div>
                                    <h3 style={{marginBottom: '16px'}}>Select Test Suite</h3>
                                    <div className="form-group">
                                        <label>
                                            <input
                                                type="radio"
                                                name="suite"
                                                value="smoke"
                                                checked={config.suite === 'smoke'}
                                                onChange={(e) => setConfig({...config, suite: e.target.value})}
                                            />
                                            {' '}Smoke Tests (147 tests, ~25min, $2.40)
                                        </label>
                                    </div>
                                    <div className="form-group">
                                        <label>
                                            <input
                                                type="radio"
                                                name="suite"
                                                value="regression"
                                                checked={config.suite === 'regression'}
                                                onChange={(e) => setConfig({...config, suite: e.target.value})}
                                            />
                                            {' '}Regression Suite (1,204 tests, ~4h, $20.10)
                                        </label>
                                    </div>
                                    <div className="form-group">
                                        <label>
                                            <input
                                                type="radio"
                                                name="suite"
                                                value="all"
                                                checked={config.suite === 'all'}
                                                onChange={(e) => setConfig({...config, suite: e.target.value})}
                                            />
                                            {' '}All Tests (2,847 tests, ~9.5h, $47.20)
                                        </label>
                                    </div>
                                </div>
                            )}

                            {step === 2 && (
                                <div>
                                    <h3 style={{marginBottom: '16px'}}>Configuration</h3>
                                    <div className="form-group">
                                        <label>Environment</label>
                                        <select
                                            className="form-select"
                                            value={config.environment}
                                            onChange={(e) => setConfig({...config, environment: e.target.value})}
                                        >
                                            <option value="production">Production</option>
                                            <option value="staging">Staging</option>
                                            <option value="development">Development</option>
                                        </select>
                                    </div>
                                    <div className="form-group">
                                        <label>Parallel Workers (1-10)</label>
                                        <input
                                            type="number"
                                            className="form-input"
                                            min="1"
                                            max="10"
                                            value={config.parallelism}
                                            onChange={(e) => setConfig({...config, parallelism: e.target.value})}
                                        />
                                    </div>
                                    <div className="form-group">
                                        <h4 style={{marginBottom: '8px'}}>Notifications</h4>
                                        <label>
                                            <input
                                                type="checkbox"
                                                checked={config.notifyEmail}
                                                onChange={(e) => setConfig({...config, notifyEmail: e.target.checked})}
                                            />
                                            {' '}Email notification
                                        </label>
                                        <br/>
                                        <label>
                                            <input
                                                type="checkbox"
                                                checked={config.notifySlack}
                                                onChange={(e) => setConfig({...config, notifySlack: e.target.checked})}
                                            />
                                            {' '}Slack notification
                                        </label>
                                    </div>
                                </div>
                            )}

                            {step === 3 && (
                                <div>
                                    <h3 style={{marginBottom: '16px'}}>Confirm Execution</h3>
                                    <div style={{background: '#f7fafc', padding: '16px', borderRadius: '8px'}}>
                                        <div><strong>Suite:</strong> {config.suite}</div>
                                        <div><strong>Environment:</strong> {config.environment}</div>
                                        <div><strong>Workers:</strong> {config.parallelism}</div>
                                        <div><strong>Notifications:</strong> {[config.notifyEmail && 'Email', config.notifySlack && 'Slack'].filter(Boolean).join(', ')}</div>
                                    </div>
                                </div>
                            )}
                        </div>

                        <div className="modal-footer">
                            {step > 1 && (
                                <button className="btn btn-secondary" onClick={() => setStep(s => s - 1)}>
                                    ← Back
                                </button>
                            )}
                            <button className="btn btn-secondary" onClick={onClose}>Cancel</button>
                            {step < 3 ? (
                                <button className="btn btn-primary" onClick={() => setStep(s => s + 1)}>
                                    Continue →
                                </button>
                            ) : (
                                <button className="btn btn-success" onClick={() => {
                                    alert('Test execution started!');
                                    onClose();
                                }}>
                                    <i data-lucide="play" style={{width: '14px', height: '14px'}}></i> Start Execution
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const DefectDetailModal = ({defect, onClose, userRole}) => {
            const [comment, setComment] = useState('');

            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal" onClick={(e) => e.stopPropagation()}>
                        <div className="modal-header">
                            <div className="modal-title">{defect.title}</div>
                            <button className="modal-close" onClick={onClose}>×</button>
                        </div>
                        <div className="modal-content">
                            <div style={{marginBottom: '16px'}}>
                                <span className="badge danger">{defect.severity.toUpperCase()}</span>
                                <span className="badge info">{defect.id}</span>
                            </div>
                            <div style={{marginBottom: '16px'}}>
                                <strong>Detected:</strong> {defect.meta}
                            </div>
                            <div style={{marginBottom: '16px'}}>
                                <strong>Assignee:</strong> {defect.assignee || 'Unassigned'}
                            </div>
                            <div style={{marginBottom: '16px'}}>
                                <strong>Description:</strong> Voice command processing times out in German locale for navigation commands.
                            </div>

                            {userRole !== 'viewer' && (
                                <div className="form-group">
                                    <label>Add Comment:</label>
                                    <textarea
                                        className="form-textarea"
                                        value={comment}
                                        onChange={(e) => setComment(e.target.value)}
                                        placeholder="Add your comment..."
                                    />
                                </div>
                            )}
                        </div>
                        <div className="modal-footer">
                            <button className="btn btn-secondary" onClick={onClose}>Close</button>
                            {userRole !== 'viewer' && (
                                <>
                                    <button className="btn btn-secondary">Assign to Me</button>
                                    <button className="btn btn-success">Mark Resolved</button>
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const KeyboardHelpModal = ({onClose}) => (
            <div className="modal-overlay" onClick={onClose}>
                <div className="modal" onClick={(e) => e.stopPropagation()}>
                    <div className="modal-header">
                        <div className="modal-title"><i data-lucide="keyboard" style={{width: '20px', height: '20px', marginRight: '8px'}}></i> Keyboard Shortcuts</div>
                        <button className="modal-close" onClick={onClose}>×</button>
                    </div>
                    <div className="modal-content">
                        <div style={{display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '16px'}}>
                            <div>
                                <h4 style={{marginBottom: '8px'}}>Navigation</h4>
                                <div style={{fontSize: '14px', marginBottom: '8px'}}><kbd>/</kbd> Focus search</div>
                                <div style={{fontSize: '14px', marginBottom: '8px'}}><kbd>Esc</kbd> Close modal</div>
                                <div style={{fontSize: '14px', marginBottom: '8px'}}><kbd>?</kbd> Show shortcuts</div>
                            </div>
                            <div>
                                <h4 style={{marginBottom: '8px'}}>Actions</h4>
                                <div style={{fontSize: '14px', marginBottom: '8px'}}><kbd>Ctrl</kbd>+<kbd>R</kbd> Refresh data</div>
                                <div style={{fontSize: '14px', marginBottom: '8px'}}><kbd>Ctrl</kbd>+<kbd>N</kbd> New test</div>
                            </div>
                        </div>
                    </div>
                    <div className="modal-footer">
                        <button className="btn btn-primary" onClick={onClose}>Got it</button>
                    </div>
                </div>
            </div>
        );

        ReactDOM.render(<Dashboard />, document.getElementById('root'));

        // Initialize Lucide icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    </script>
</body>
</html>
